@import model._;
@(juego: Trivial, coor: String);
<!DOCTYPE html>
<html ng-app="index">
<head>
<title>Trivial 1b</title>
<link rel="stylesheet" media="screen"
	href='@routes.Assets.at("stylesheets/bootstrap.css")'>

<script
	src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

<script type="text/javascript"
	src='@routes.Assets.at("javascripts/tirarDado.js")'></script>

<script type="text/javascript">

var ws = new WebSocket('ws://localhost:9000/socket');

ws.onmessage = function (e) {
	alert(e.data);
}

var theObj=""; 
var data;
function toolTip(me) { 

	theObj=me; 
theObj.onmousemove=updatePos; 

window.onscroll=updatePos; 

	var coorString=window.event.offsetX +"-"+ window.event.offsetY;
	
	ws.send(coorString);
	
	$('#pieza').css({
		top: window.event.offsetY -20 + 'px',
		left: window.event.offsetX -20 + 'px'
	});
	
	
	    $.ajax(
	       { url:"@routes.Application.tablero()",
	       data: {
                'coor': coorString
            },
            dataType: 'json',
	         success: function(data){
	      	 	console.log(data);
	      	 	
	      	 	if (!data.encontrada) {
	      	 		alert('Casilla no v涇ida');
	      	 		return;
	      	 	}
	   
	      	 	$('#campo-enunciado').text(data.enunciado);
	      	 	
      	 		$('#campo-opciones').empty()
	      	 	$(data.opciones).each(function (i) {
	      	 		var correcta = i == data.correcta;
	      	 		$('#campo-opciones')
	      	 			.append('<label><input type="radio" name="opcion" value="' + correcta + '"/>' + this + '</label>');
	      	 	});
	      	 	$('#campo-opciones input').change(function () {
	      	 		console.log(this);
	      	 		if ($(this).val() == 'true') {
	      	 			alert('Correcta');
	      	 			/*
	      	 		    $.ajax(
	      	 			       { url:"@routes.Application.tablero()",
	      	 			       data: {
	      	 		                'coor': coorString
	      	 		            }
	      	 			       });
	      	 			*/
	      	 		}
	      	 		else {
	      	 			alert('Incorrecta');
	      	 		}
	      	 	});
	      	 }
		   });
	 

	} 




function updatePos() { 
var ev=arguments[0]?arguments[0]:event; 
var x=ev.clientX; 
var y=ev.clientY; 
diffX=8; 
diffY=8; 
document.getElementById('toolTipBox').style.top = y-2+diffY+document.body.scrollTop+ "px"; 
document.getElementById('toolTipBox').style.left = x-2+diffX+document.body.scrollLeft+"px"; 
theObj.onmouseout=hideMe; 

// Get a reference to the image you want the pixels of and its dimensions
var myImage = document.getElementById('tablero');
var w = myImage.width, h = myImage.height;

// Create a Canvas element
var canvas = document.createElement('canvas');

// Size the canvas to the element
canvas.width = w;
canvas.height = h;

// Draw image onto the canvas
var ctx = canvas.getContext('2d');
ctx.drawImage(myImage, 0, 0,w,h);

// Finally, get the image data
// ('data' is an array of RGBA pixel values for each pixel)
this.data = ctx.getImageData(y-2+diffY+document.body.scrollTop, x-2+diffX+document.body.scrollLeft, w, h);


} 
function hideMe() { 
document.getElementById('toolTipBox').style.display="none"; 
} 
</script>



</head>
<body>

	<div class="container">
		<!-- Static navbar -->
		<nav class="navbar navbar-default">
			<div class="container-fluid">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed"
						data-toggle="collapse" data-target="#navbar" aria-expanded="false"
						aria-controls="navbar">
						<span class="sr-only">Toggle navigation</span> <span
							class="icon-bar"></span> <span class="icon-bar"></span> <span
							class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="">Trivial 1b</a>
				</div>
				<div id="navbar" class="navbar-collapse collapse">
					<ul class="nav navbar-nav">
						<li class="active"><a href="/index">Inicio</a></li>

					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li class="active"><a href="/finpartida"
							onclick="return confirm('Est치s a punto de finalizar la partida. \n쮼st치s seguro?');">Finalizar
								partida <span class="sr-only">(current)</span>
						</a></li>
						<li><a href="@routes.Application.logout()"
							onclick="return confirm('Est치s a punto de cerrar sesi칩n. \n쮼st치s seguro?');">Cerrar
								sesi칩n</a></li>

					</ul>
				</div>
				<!--/.nav-collapse -->
			</div>
			<!--/.container-fluid -->
		</nav>

		<!-- Main component for a primary marketing message or call to action -->
		<div class="row">
			<div class="col-md-6">

				<button onClick="lanzar()">
					<img src='@routes.Assets.at("images/dado.gif")' name="dado">
				</button>
				<br></br>
				<div class="panel panel-default">
					<div class="panel-heading" id="campo-enunciado"></div>
					<div class="panel-body" id="campo-opciones"></div>
				</div>
				<br></br>

			</div>
			<div class="col-md-6">
				<p align="center" style="position: relative;">

					<img src='@routes.Assets.at("images/tablero-redondo.jpg")'
						id="tablero" width="100%" height="100%" border="0"
						onclick="toolTip(this);return false"> <img
						src='@routes.Assets.at("images/j1.png")' id="pieza"
						style="position: absolute; top: 50px; right: 50px;">

				</p>
			</div>

			<span id="toolTipBox" width="200"></span>


		</div>

	</div>

</body>
</html>